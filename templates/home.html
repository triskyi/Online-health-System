{% load static %}
{% static "image" as baseUrl %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vote</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <script src="{% static 'script.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://kit.fontawesome.com/01485634d3.js" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }


        .dashboard {
            display: flex;
            flex-wrap: wrap;
        }

        .main-content {
            flex: 4;
            padding: 20px;
        }

        .widget {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
        }

        .aside {
            flex: 1;
            background-color: #87CEEB;
            /* Sky blue background */
            color: black;
            /* White text color */
            padding: 20px;
            overflow: hidden;
            max-width: 300px;
            transition: all 0.5s;
        }

        h1 {
            text-align: center;
            color: skyblue;
            font-size: 30px;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        h4 {
            text-align: center;
            color: blackskyblue;
            font-size: 20px;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }


        .header {
            background-color: #3498db;
            color: black;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 30px;
            margin-right: 10px;
        }

        .menu-links {
            display: flex;
            align-items: center;
        }

        .menu-links a {
            color: black;
            text-decoration: none;
            margin-right: 20px;
            font-size: 18px;
            transition: color 0.3s;
        }

        .menu-links a:hover {
            color: green;
        }

        .aside ul {
            list-style-type: none;
            padding: 0;
        }

        .aside ul li {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .aside ul li i {
            margin-right: 10px;
        }

        .aside ul li span {
            display: inline;
            margin-right: 10px;
        }

        .aside ul li a {
            text-decoration: none;
            color: black;
            font-size: 18px;
            transition: color 0.3s;
        }

        .aside ul li a:hover {
            color: green;
        }

        ul.messages {
            list-style-type: none;
            padding: 10px;
            margin: 0;
        }

        ul.messages li {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        ul.messages li.success {
            background-color: #4CAF50;
            color: #fff;
        }

        ul.messages li.error {
            background-color: #FF5722;
            color: #fff;
        }

        ul.messages li.info {
            background-color: #2196F3;
            color: #fff;
        }

        ul.messages li.warning {
            background-color: #FFC107;
            color: #000;
        }


        @media (max-width: 768px) {
            .aside {
                max-width: 0;
            }

            .aside-toggle+.aside ul li i {
                visibility: visible;
            }

            .aside-toggle+.aside ul li span {
                display: none;
            }
        }
    </style>

</head>

<body>
    <div class="header">
        <div class="logo">
            <img src="{% static 'vote.png' %}" alt="Your Logo">
        </div>
        <div class="menu-links">
            <a href="#" class="active"><i style="margin-right: 5px" class="fa-solid fa-house"></i>Home</a>

            {% if user.is_authenticated %}
            <a href="{% url 'profile' %}"><i class="fa-sharp fa-solid fa-house-user"
                    style="margin-right: 5px"></i>Profile</a>
            <a href="#" class="active"><i style="margin-right: 5px" class="fa-solid fa-house"></i>FAQ</a>


            {% else %}
            <a href="{% url 'login' %}"><i class="fa-sharp fa-solid fa-house-user"
                    style="margin-right: 5px"></i>login</a>
            <a href="{% url 'register' %}"><i class="fa-sharp fa-solid fa-house-user"
                    style="margin-right: 5px"></i>Register</a>

            {% endif %} <!-- Add other links here -->
        </div>
    </div>
    {% if user.is_authenticated %}
    <div class="dashboard">

        <aside class="aside">
            <button class="menu-button aside-toggle" onclick="toggleAside()">â˜°</button>
            <ul>
                <h4>Candidates</h6>
                    <li><a href="javascript:void(0);" onclick="showContent('Item1')"><i
                                class="fas fa-user"></i><span>President</span></a></li>

                    <li><a href="javascript:void(0);" onclick="showContent('Item2')"><i
                                class="fas fa-user"></i><span>Vice
                                President</span></a></li>
                    <li><a href="javascript:void(0);" onclick="showContent('Item3')"><i
                                class="fas fa-user"></i><span>General Secretary</span></a></li>
                    <li><a href="javascript:void(0);" onclick="showContent('Item4')"><i
                                class="fas fa-user"></i><span>Accountant</span></a></li>
            </ul>
        </aside>

        <div class="main-content">
            <h1>Welcome to our voting site</h1>
            <p>Welcome, valued voter! We are excited to have you participate in our democratic process.</p>
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }} </li>
                {% endfor %}
            </ul>
            {% endif %}
            <div id="content-Item1" class="widget" style="display: none;">
                <h1>Welcome to BUSA Election Website</h1>

                {% for candidate in candidates %}
                {% if candidate.place == "President" %}
                <div class="card">
                    <h2>{{ candidate.place }}</h2>
                    <img src="{{ candidate.image.url }}" alt="Candidate Image">
                    <p>Candidate: <span class="candidate-name">{{ candidate.name }}</span></p>
                    <p>Current Vote Count: <span class="vote-count">{{ candidate.total_votes }}</span></p>
                    {% if user.is_authenticated %}
                    <form action="{% url 'vote' candidate_id=candidate.id %}" method="post">
                        {% csrf_token %}

                        <input type="submit" class="vote-button" name="vote" value="Vote">
                    </form>
                    {% endif %}


                    <!-- Add the "Vote" button -->
                    <!-- -->
                    <!--<button class="vote-button" action="" method="POST">Vote</button>-->
                    <!-- -->
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <!-- Add content for other positions (Vice President, General Secretary, Accountant) here -->

            <div id="content-Item2" class="widget" style="display: none;">
                <h1>Welcome to BUSA Election Website</h1>
                {% for candidate in candidates %}
                {% if candidate.place == "Vice president" %}
                <div class="card">
                    <h2>{{ candidate.place }}</h2>
                    <img src="{{ candidate.image.url }}" alt="Candidate Image">
                    <p>Candidate: <span class="candidate-name">{{ candidate.name }}</span></p>
                    <p>Current Vote Count: <span class="vote-count">{{ candidate.total_votes }}</span></p>
                    {% if user.is_authenticated %}
                    <form action="{% url 'vote' candidate_id=candidate.id %}" method="post">
                        {% csrf_token %}

                        <input type="submit" class="vote-button" name="vote" value="Vote">
                    </form>
                    {% endif %}


                    <!-- Add the "Vote" button -->
                    <!-- -->
                    <!--<button class="vote-button" action="" method="POST">Vote</button>-->
                    <!-- -->
                </div>
                {% endif %}
                {% endfor %}
            </div>


            <div id="content-Item3" class="widget" style="display: none;">
                <h1>Welcome to BUSA Election Website</h1>
                {% for candidate in candidates %}
                {% if candidate.place == "General Secretary" %}
                <div class="card">
                    <h2>{{ candidate.place }}</h2>
                    <img src="{{ candidate.image.url }}" alt="Candidate Image">
                    <p>Candidate: <span class="candidate-name">{{ candidate.name }}</span></p>
                    <p>Current Vote Count: <span class="vote-count">{{ candidate.total_votes }}</span></p>
                    {% if user.is_authenticated %}
                    <form action="{% url 'vote' candidate_id=candidate.id %}" method="post">
                        {% csrf_token %}

                        <input type="submit" class="vote-button" name="vote" value="Vote">
                    </form>
                    {% endif %}


                    <!-- Add the "Vote" button -->
                    <!-- -->
                    <!--<button class="vote-button" action="" method="POST">Vote</button>-->
                    <!-- -->
                </div>
                {% endif %}
                {% endfor %}
            </div>


            <div id="content-Item4" class="widget" style="display: none;">
                <h1>Welcome to BUSA Election Website</h1>
                {% for candidate in candidates %}
                {% if candidate.place == "Accountant" %}
                <div class="card">
                    <h2>{{ candidate.place }}</h2>
                    <img src="{{ candidate.image.url }}" alt="Candidate Image">
                    <p>Candidate: <span class="candidate-name">{{ candidate.name }}</span></p>
                    <p>Current Vote Count: <span class="vote-count">{{ candidate.total_votes }}</span></p>
                    {% if user.is_authenticated %}
                    <form action="{% url 'vote' candidate_id=candidate.id %}" method="post">
                        {% csrf_token %}

                        <input type="submit" class="vote-button" name="vote" value="Vote">
                    </form>
                    {% endif %}


                    <!-- Add the "Vote" button -->
                    <!-- -->
                    <!--<button class="vote-button" action="" method="POST">Vote</button>-->
                    <!-- -->
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    {% else %}
    <main>
        <h1>Welcome to BUSA Election Website </h1>
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }} </li>
            {% endfor %}
        </ul>
        {% endif %}

        {% for candidate in candidates %}
        <div class="card">
            <h2>{{ candidate.place }}</h2>
            <img src="{{ candidate.image.url }}" alt="Candidate Image">
            <p>Candidate: <span class="candidate-name">{{ candidate.name }}</span></p>
            <p>Current Vote Count: <span class="vote-count">{{ candidate.total_votes }}</span></p>
            {% if user.is_authenticated %}
            <form action="{% url 'vote' candidate_id=candidate.id %}" method="post">
                {% csrf_token %}

                <input type="submit" class="vote-button" name="vote" value="Vote">
            </form>
            {% endif %}


            <!-- Add the "Vote" button -->
            <!-- -->
            <!--<button class="vote-button" action="" method="POST">Vote</button>-->
            <!-- -->
        </div>
        {% endfor %}

    </main>
    <footer>
        <p>2023 BI TECH</p>
    </footer>




    {% endif %}
    <script>
        function toggleAside() {
            var aside = document.querySelector('.aside');
            if (aside.style.maxWidth === "0px" || aside.style.maxWidth === "") {
                aside.style.maxWidth = "300px";
            } else {
                aside.style.maxWidth = "0px";
            }
        }

        function showContent(item) {
            var contentElements = document.querySelectorAll('.widget');
            contentElements.forEach(function (element) {
                element.style.display = 'none';
            });
            var contentElement = document.getElementById('content-' + item);
            if (contentElement) {
                contentElement.style.display = 'block';
            }
        }
    </script>
    <script src="https://kit.fontawesome.com/01485634d3.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Add a click event listener to all "Vote" buttons
            $(".vote-button").click(function () {
                var candidateId = $(this).closest(".card").data("candidate-id");
                var voteCountElement = $(this).siblings("p").find(".vote-count");

                // Simulate incrementing the vote count by 1 for demonstration
                var currentVoteCount = parseInt(voteCountElement.text());
                var newVoteCount = currentVoteCount + 1;
                voteCountElement.text(newVoteCount);

                // In a real implementation, you would send an AJAX request to update the server-side vote count
                // and handle any success or error responses accordingly.
            });
        });
    </script>

</body>

</html>